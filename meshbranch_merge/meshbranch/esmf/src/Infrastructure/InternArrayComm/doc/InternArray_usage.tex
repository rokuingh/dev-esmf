% $Id: InternArray_usage.tex,v 1.1 2006/03/24 16:36:36 theurich Exp $

%\subsection{Usage}

The variants of Array create methods include 2 language 
interfaces, 3 allocation options, and 3 data type/kind/rank (TKR) 
specification options.  
From Fortran the create options
are to specify TKR either explicitly, with an ArraySpec
object, or to give a Fortran array pointer which is queried by the
framework.  The allocation options are to allocate uninitialized
space, to allocate space and copy data values into it, or to
reference already allocated data space.
The {\tt ESMF\_ArrayCreate()} method is overloaded in Fortran with 
an interface block.

The Array get/set methods support returning either a pointer to
the existing space, or allocating a new copy of the data
and returning a pointer to the copy.  The return value is a Fortran 
pointer to a specific TRK array.  This allows standard Fortran array 
manipulations
to be performed on the data without intervention of the framework.

The general allocation/deallocation rules are: if the ESMF 
allocated the space at create time then the Array destroy routine 
will deallocate the space at the time the Array object is deleted.  
If the user allocated the space by specifying the data 
reference option to the create method then the space will not
be deallocated by the framework. The user is responsible
for calling the corresponding language routine to return the
space to the heap.  If the user requests a copy of the data with
a call to the {\tt ESMF\_ArrayGetData()} routine, they assume ownership of
the copied buffer and are responsible for deallocating the space.


