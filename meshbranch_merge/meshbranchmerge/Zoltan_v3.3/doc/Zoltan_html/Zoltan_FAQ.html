<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="filename" content="Zoltan.html">
   <meta name="review" content="28 May, 1999">
   <meta name="subject" content="Zoltan Home Page">
   <meta name="sandia.approval_type" content="formal">
   <meta name="sandia.approved" content="SAND99-1375">
   <meta name="sandia.create_date" content="05/28/99">
   <meta name="keywords" content="Zoltan, Zoltan Home Page, Zoltan dynamic load balancing library, Zoltan parallel computing">
   <meta name="description" content="Zoltan:  Home Page for the Zoltan Library project at Sandia National Laboratories">
   <meta name="GENERATOR" content="Mozilla/4.7 [en] (X11; U; SunOS 5.7 sun4u) [Netscape]">
   <title>Zoltan</title>
<!-----------------------------------------------------------------------------
 ! Zoltan Library for Parallel Applications            !
 ! Copyright (c) 2000-2007, Sandia National Laboratories.                !
 ! For more info, see the README file in the top-level Zoltan directory.      !
 !----------------------------------------------------------------------------!
-->
<!-- CVS File Information
     $RCSfile$
     $Author$
     $Date$
     $Revision$
-->

<!----CHANGE INFORMATION IN AREAS WITH THIS HEADER---->
<!----SCROLL DOWN TO FIND OTHER AREAS TO BE CHANGED---->
<!--------CHANGE THE NAME AFTER THE DASH-------->
<!--------CHANGE THE FILENAME-------->
<!--------CHANGE THE REVIEW DATE-------->
<!--------CHANGE THE SUBJECT-------->
<link rel="schema.sandia" href="http://www.sandia.gov/html_schema.htm">
<!--------CHANGE THE SAND NUMBER INFO-------->
<!--------INSERT THE DATE DOCUMENT CREATED-------->
<!--------CHANGE THE PAGE OWNER AND EMAIL ADDRESS-------->
<link rev="made" title="name of contact" >
<!--------CHANGE THE PAGE MAKER AND EMAIL ADDRESS-------->
<!--------PLACE FIVE KEY WORDS WITHIN THE QUOTES-------->
<!---------------END OF THIS CHANGE AREA--------------->
</head>
<body text="#000000">
<!-- KDD Turned off alternative link colors in template; the >
<!-- following line was part of the above body command. >
<!-- link="#003366" vlink="#cc0033" alink="#000000">
<a NAME="TOP"></a><!---TOP BANNER AREA STARTS HERE--->
<table BORDER=0 valign="top" >
<tr VALIGN=TOP>
<td VALIGN=TOP WIDTH="160" BGCOLOR="#003366">
<table BORDER=0 WIDTH="160" valign="top" >
<tr VALIGN=TOP>
<td VALIGN=TOP WIDTH="160"><!--SANDIA LOGO AT TOP LEFT-->
<a href="http://www.sandia.gov/Main.html"><img SRC="http://www.sandia.gov/images/snlstkdc.gif" ALT="[Sandia National Laboratories]" BORDER=0 valign="top" height=49 width=126></a>
<p><img ISMAP SRC="http://www.sandia.gov/images/labelNEW.gif" ALT="[navigation panel]" HSPACE=2 BORDER=0 usemap="#shortMap" height=119 width=111></td>

<td><img SRC="http://www.sandia.gov/images/1pixel.gif" BORDER=0 height=1 width=10></td>
</tr>
</table>

<table BORDER=0 WIDTH="160" valign="top" >
<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 0th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan.html">Zoltan
Home Page</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 1st little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><font face="Verdana, Arial, Helvetica"><a href="ug_html/ug.html">Zoltan
User's Guide</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 2nd little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><font face="Verdana, Arial, Helvetica"><a href="dev_html/dev.html">Zoltan
Developer's Guide</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 2A-nd little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan_FAQ.html">
Frequently Asked Questions</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 3rd little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan_phil.html">Zoltan
Project Description</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 4th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan_pubs.html">Papers
and Presentations</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 4Ath little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan_cite.html">How to Cite Zoltan</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 5th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica"><a href="http://www.cs.sandia.gov/~web1400/1400_download.html">Download
Zoltan</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 6th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica"><a href="Zoltan_bugreport.html">Report a Zoltan Bug</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 7th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica">
<a href="mailto: zoltan-dev@software.sandia.gov">Contact Zoltan Developers</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>
<!-------------------------------------------------------------------------->
<tr ALIGN=LEFT VALIGN=TOP>
<td VALIGN=TOP WIDTH="150"><!----------- 8th little turquoise bevel button ------------>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="150" BGCOLOR="#00CCFF" >
<tr ALIGN=CENTER VALIGN=CENTER>
<td COLSPAN="2"><b><font face="Verdana, Arial, Helvetica">
<a href="http://www.sandia.gov/general/privacy-security/index.html">Sandia Privacy and Security Notice</a></font></b></td>
</tr>
</table>
</td>

<td VALIGN=TOP WIDTH="20"></td>
</tr>

<tr VALIGN=TOP>
<td COLSPAN="2"></td>
</tr>

<!-------------------------------------------------------------------------->
</table>
</td>

<td VALIGN=TOP><!--MAIN CONTENT AREA STARTS HERE--><!----------------THIS IS A CHANGE AREA----------------><!------HEADER TEXT SHOULD BE REPLACE THIS TEXT------><b><font face="Verdana, Arial, Helvetica"><font size=+2>Zoltan:&nbsp;</font></font></b>
<br><b><font face="Verdana, Arial, Helvetica"><font size=+2>Parallel Partitioning, Load Balancing and Data-Management Services 
<p>
Frequently Asked Questions
</font></font></b>
<p><!---------------END OF THIS CHANGE AREA---------------><!----------------THIS IS A CHANGE AREA----------------><!--MAIN CONTENT SHOULD BE PLACED IN THE AREA BELOW-->
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->

<hr WIDTH="100%">
<p>
<ol>
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<!------------  Type questions here; hyperlink to answers below. ---------->
<!------------  Keep them in the same order!                     ---------->
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<li>  <a href="#DEPFILES">What does the following message mean during 
compilation of <i>zoltan</i>?
<blockquote>
Makefile:28: mem.d: No such file or directory
</blockquote></a>
<li>  <a href="#MPILEAK">On some platforms, why do Zoltan partitioning 
methods RCB and RIB use an increasing amount of memory over multiple 
invocations?</a>
<li>  <a href="#ZOLTANUSERDATA">Why does compilation of the Fortran90 driver <i>zfdrive</i> fail in fdr_const.f90?</a>
<li>  <a href="#MPIRECVLIMIT">During runs (particularly on RedStorm), MPI 
reports that it is out of resources or too many messages have been posted.
What does this mean and what can I do?</a>
<li> <a href="#REALLOCBUG">Realloc fails when there is plenty of memory.  Is this a Zoltan bug?</a>
</ol>
<p>
<hr WIDTH="100%">
<hr WIDTH="100%">
<p>
<ol>
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<!------------  Type answers here.                         ---------------->
<!------------  Keep them in the same order as list above! ---------------->
<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<li>  <a NAME="DEPFILES"></a>What does the following message mean during
compilation of Zoltan?
<blockquote>
Makefile:28: mem.d: No such file or directory</blockquote>
Every time Zoltan is built, gmake looks for a dependency file <i>filename</i>.d 
for each source file <i>filename</i>.c.  The first time Zoltan is built for a 
given platform, the dependency files do not exist.  The dependency files are
also removed by "gmake clean."  Don't worry, though; after producing this
warning, gmake will create the dependency files it needs and continue 
compilation.

<hr WIDTH="100%">
<li>  <a name="MPILEAK"></a>On some platforms, why do Zoltan partitioning 
methods RCB and RIB use an increasing amount of memory over multiple 
invocations?
<p>
Zoltan partitioning methods RCB and RIB use MPI_Comm_dup and MPI_Comm_split 
to recursively create communicators with subsets of processors.  
Some implementations of 
MPI (e.g., the default MPI on Sandia's Thunderbird cluster) do not correctly
release memory associated with these communicators during MPI_Comm_free,
resulting in growing memory use over multiple invocations of RCB or RIB.  
An undocumented workaround in 
Zoltan is to set the TFLOPS_SPECIAL parameter to 1 (e.g., 
<a href="ug_html/ug_interface_init.html#Zoltan_Set_Param"><b>Zoltan_Set_Param</b></a>(zz,"TFLOPS_SPECIAL","1");), which causes an 
implementation that doesn't use MPI_Comm_split to be invoked.

<hr WIDTH="100%">
<li>  <a name="ZOLTANUSERDATA"></a>Why does compilation of the Fortran90 driver <i>zfdrive</i> fail in fdr_const.f90?
<p>
The Fortran90 driver <i>zfdrive</i> uses user-defined data types for a mesh
data structure.  It passes these data types to the Zoltan query functions
through the <i>void *data</i> argument.  Strict type checking in Fortran90
requires that the query interface have these user-defined data types compiled
into the interface.  The solution is as follows: 
<blockquote>
cd Zoltan/fort<br>
mv zoltan_user_data.f90 zoltan_user_data.f90.zoltan<br>
ln -s ../fdriver/zoltan_user_data.f90 .<br>
cd ..<br>
touch fdriver/zoltan_user_data.f90 fort/zoltan_user_data.f90<br>
gmake zfdrive<br>
</blockquote>
See the <a href="ug_html/ug_fortran.html#fortran ug api">Fortran90 API</a>
description in the User's Guide 
and <a href="dev_html/dev_driver.html">instructions for using <i>zfdrive</i></a>
in the Developer's Guide for more details.

<hr WIDTH="100%">
<li><a name="MPIRECVLIMIT"></a>During runs (particularly on RedStorm), MPI 
reports that it is out of resources or too many messages have been posted.
What does this mean and what can I do?
<p>
Some implementations of MPI (including RedStorm's implementation) limit
the number of message receives that can be posted simultaneously.  Some
communications in Zoltan (including hashing of IDs to processors in the
Zoltan Distributed Data Directory) can require messages from large numbers
of processors, triggering this error on certain platforms. 
<p>
To avoid this problem, Zoltan contains logic to use AllToAll communication 
instead of point-to-point communication when a large number
of receives are needed.  The maximum number of simultaneous receives allowed
can be set as a compile-time option to Zoltan.
In the <a href="ug_html/ug_usage.html#NativeZoltanBuild">native Zoltan
build environment</a>, add -DMPI_RECV_LIMIT=# to the
DEFS line of zoltan/src/Utilities/Config/Config.&lt;platform>
, where # is the maximum number of simultaneous receives allowed.
In the <a href="ug_html/ug_usage.html#TrilinosAutotools">Autotool build
environment</a>, option <i>--enable-mpi-recv-limit=#</i> sets the 
maximum number of simultaneous receives allowed.  The default value is 2000.

<hr WIDTH="100%">
<li> <a name="REALLOCBUG"></a>Realloc fails when there is plenty of memory.  Is this a Zoltan bug?
<p>
This problem has been noted on different Linux clusters running parallel
applications using different MPI libraries and C++ libraries.  Realloc fails where
a malloc call will succeed.  The source of the error has
not been identified, but it is not a Zoltan bug.  The
solution is to compile Zoltan with the flag <b>-DREALLOC_BUG</b>.  Zoltan will replace
every realloc call with malloc followed by a memcpy and a free.
</ol>

<p>
<hr WIDTH="100%">
Updated:  $Date$

<!------------------------------------------------------------------------->
<!------------------------------------------------------------------------->
<hr WIDTH="100%">
Copyright (c) 2000-2007, Sandia National Laboratories. <br>
The Zoltan Library and its documentation are released
under the <a href="http://www.gnu.org/copyleft/lesser.html">GNU Lesser General Public License (LGPL)</a>.  
See the README file in the main Zoltan directory for more information.
<hr WIDTH="100%">

<!---------MAIN CONTENT AREA ENDS HERE---------><!-- CHANGE CONTACT + E-MAIL, NOTE "SUBJECT" IN E-MAIL CODE --></td>
</tr>
</table>

<hr width="100%">
<table BORDER=0 WIDTH="100%" >
<tr ALIGN=CENTER>
<td VALIGN=TOP WIDTH="140">
<table BORDER=0 WIDTH="140" >
<tr>
<td ALIGN=CENTER VALIGN=TOP WIDTH="120"></td>

<td WIDTH="20"></td>
</tr>
</table>
</td>

<td ALIGN=CENTER VALIGN=TOP WIDTH="100%"></td>
</tr>
</table>
<!--Image maps below-->
<map name="shortMap">
<area shape="rect" coords="2,2,108,14"href="http://www.sandia.gov/about/index.html"></area>
<area shape="rect" coords="2,19,108,31"href="http://www.sandia.gov/mission/ste/index.html"></area>
<area shape="rect" coords="2,36,108,48"href="http://www.sandia.gov/mission/index.html"></area>
<area shape="rect" coords="2,53,108,65"href="http://www.sandia.gov/contact-us/index.html"></area>
<area shape="rect" coords="2,70,108,82"href="http://www.sandia.gov/news/index.html"></area>
<area shape="rect" coords="2,87,108,99"href="http://www.sandia.gov/search/index.html"></area>
<area shape="rect" coords="2,104,108,116"href="http://www.sandia.gov/Main.html"></area>
</map>
<!----------------THIS IS A CHANGE AREA---------------->
<!----NAME AND DATE OF LAST REVISION SHOULD BE HERE---->
<!---------------END OF THIS CHANGE AREA--------------->
</body>
</html>
